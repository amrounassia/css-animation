<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">

<link rel="stylesheet" href="css/style.css">

<link href='//fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

<script src="js/libs/modernizr.min.js"></script>
<script src="js/libs/jquery.min.js"></script>
<script src="js/libs/jquery.appear-1.1.1.modified.js"></script>

<script>
	if (Modernizr.csstransitions) {
		function preloadImages(imgs, callback) {
			var cache = [],
				imgsTotal = imgs.length,
				imgsLoaded = 0;
	
			$(imgs).each(function (i, img) {
				var cacheImage = document.createElement('img');
				cacheImage.onload = function () {
					if (++imgsLoaded == imgsTotal) callback();
				};
				cacheImage.src = $(img).attr('src');
				cache.push(cacheImage);
			});
		};
		$.fn.trans = function () {
			var t = arguments[0],
				d = arguments[1] || '';
			if (t) {
				$.each(this, function (i, e) {
					$(['-webkit-', '-moz-', '-o-', '-ms-', '']).each(function (i, p) {
						$(e).css(p + 'transition' + d, t);
					});
				});
			}
		};
			
		$(function(){
			//preload images contained within elements that need to animate
			preloadImages($('.services img, .featured img'), function () {
				$('.services, .featured').appear({
					once: true,
					forEachVisible: function (i, e) {
						$(e).data('delay', i);
					},
					appear: function () {
						var delay = 150,
							stagger = 800,
							sequential_delay = stagger * parseInt($(this).data('delay')) || 0;
	
						$(this).children().each(function (i, e) {
							$(e).trans(i * delay + sequential_delay + 'ms', '-delay');
						});
						$(this).removeClass('fadeIn');
					}
				});
			});
		});
	}
</script>

<title>Css animation test</title>

</head>
<body>
	<div id="wrapper">
		<section>
			<article>
				<h1>Css animation test</h1>
				
				<ul>
					<li>
						Based on <a href="http://www.creativebloq.com/css3/getting-css-animations-trigger-1132906">this article by CreativeBloq.com &#8594; Getting CSS animations to trigger at the right time</a>
					</li>
					<li>See a working <a href="_demo/">_demo/</a></li>
				</ul>
			</article>
		</section>

		<hr>

		<section>
			<div class="module">
				<p>
					<img src="http://placehold.it/145x62" alt="">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga, recusandae tenetur vel sequi harum quam quaerat est doloremque! Odit, voluptatum!
				</p>
			</div>

			<div class="module">
				<p>
					<img src="http://placehold.it/145x62" alt="">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga, recusandae tenetur vel sequi harum quam quaerat est doloremque! Odit, voluptatum!
				</p>
			</div>

			<div class="module">
				<p>
					<img src="http://placehold.it/145x62" alt="">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga, recusandae tenetur vel sequi harum quam quaerat est doloremque! Odit, voluptatum!
				</p>
			</div>
		</section>	

		<hr>
	</div>
</body>

<script>
	if (Modernizr.csstransitions) document.write('<link rel="stylesheet" href="css/animation.css" />');
</script>

</html>